# Frontend Next.js Configuration Example

# Public environment variables (accessible in browser)
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_SUPABASE_URL=https://mnfuileyigqbybpbromw.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Private environment variables (server-side only)
API_URL=http://localhost:8000

# Google Tag Manager (optional)
# Get your GTM container ID from https://tagmanager.google.com
NEXT_PUBLIC_GTM_ID=GTM-XXXXXXX

# ============================================
# Credential Encryption (REQUIRED)
# ============================================
# AES-256-GCM key for encrypting integration credentials stored in database
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# This key encrypts PostHog, Attio, and other API keys. DO NOT LOSE IT.
ENCRYPTION_KEY=your-64-character-hex-key-here

# ============================================
# Deployment Mode
# ============================================
# Controls whether billing features are enabled
# - 'cloud': Billing enabled with Stripe LIVE keys (production only)
# - 'preview': Billing enabled with Stripe TEST keys (staging/preview)
# - 'self-hosted': Billing disabled, unlimited access (default)
#
# For self-hosting: Leave unset or set to 'self-hosted'
# For production (Vercel): Set to 'cloud'
# For preview/staging (Vercel): Set to 'preview' or leave unset (auto-detected)
DEPLOYMENT_MODE=self-hosted

# ============================================
# Supabase Configuration
# ============================================
# Production Supabase (main database)
# NEXT_PUBLIC_SUPABASE_URL=https://mnfuileyigqbybpbromw.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=...
# SUPABASE_SERVICE_ROLE_KEY=... (server-side only, never expose!)

# Staging Supabase Branch (for preview deployments)
# Use these values for Vercel Preview environment variables:
# NEXT_PUBLIC_SUPABASE_URL=https://qqjwsqgtijiitvhijqep.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=... (from Supabase staging branch)
# SUPABASE_SERVICE_ROLE_KEY=... (from Supabase staging branch)

# ============================================
# Stripe Configuration
# ============================================
# Production (DEPLOYMENT_MODE=cloud) - Use LIVE keys
# STRIPE_SECRET_KEY=sk_live_...
# STRIPE_WEBHOOK_SECRET=whsec_... (production webhook endpoint)
# STRIPE_MTU_PRODUCT_ID=prod_... (live mode product ID)
# STRIPE_MTU_METER_ID=... (live mode meter event name)

# Preview/Staging (DEPLOYMENT_MODE=preview) - Use TEST keys
# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_... (test webhook endpoint)
# STRIPE_MTU_PRODUCT_ID=prod_... (test mode product ID)
# STRIPE_MTU_METER_ID=... (test mode meter event name)

# ============================================
# Resend Email Configuration
# ============================================
# Only required when DEPLOYMENT_MODE=cloud or DEPLOYMENT_MODE=preview
# RESEND_API_KEY=re_...
# RESEND_FROM_EMAIL=billing@getbeton.ai

# ============================================
# Agent Integration
# ============================================
# Shared secret between Inspector and the Agent (Railway ML backend).
# Agent requests must include this value in the `x-agent-secret` header.
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# REQUIRED for agent endpoints to accept requests. When unset, all agent
# requests are blocked (secure by default).
AGENT_SECRET=your-64-character-hex-secret-here

# URL of the Agent ML backend service (Railway)
# Defaults to production Railway URL if not set.
# AGENT_API_URL=https://inspector-ml-backend-production.up.railway.app

# ============================================
# Cron Job Authentication
# ============================================
# Secret for authenticating Vercel Cron requests
# CRON_SECRET=your-random-secret-here

# ============================================
# Notes
# ============================================
# - NEXT_PUBLIC_* variables are exposed to the browser
# - Other variables are kept private on the server
# - Copy this file to .env.local and fill in your actual values
#
# Vercel Environment Variable Scoping:
# - Production env: DEPLOYMENT_MODE=cloud, Stripe live keys, production Supabase
# - Preview env: DEPLOYMENT_MODE=preview, Stripe test keys, staging Supabase
#
# Testing Cards (Stripe test mode):
# - Success: 4242 4242 4242 4242
# - Decline: 4000 0000 0000 0002
# - More at: https://docs.stripe.com/testing#cards
